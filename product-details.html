<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoyaleStones Style Image Zoom</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== BASE RESET ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .page-title {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
            font-size: 28px;
            font-weight: 600;
        }
        
        .page-title span {
            color: #b8860b;
        }
        
        /* ===== PRODUCT IMAGE ZOOM SYSTEM ===== */
        .product-gallery {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        /* Main Image Container */
        .image-zoom-container {
            position: relative;
            width: 100%;
            overflow: hidden;
            border-radius: 8px;
            background: #f8f9fa;
        }
        
        .main-image-wrapper {
            position: relative;
            width: 100%;
            height: 500px;
            cursor: crosshair;
        }
        
        #mainProductImage {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
        /* Zoom Lens - Small box that follows cursor */
        .zoom-lens {
            position: absolute;
            border: 2px solid rgba(184, 134, 11, 0.7);
            background-color: rgba(184, 134, 11, 0.1);
            cursor: none;
            pointer-events: none;
            z-index: 10;
            display: none;
            width: 150px;
            height: 150px;
            border-radius: 4px;
            box-shadow: 0 0 0 1px rgba(255,255,255,0.5) inset;
        }
        
        /* Zoom Result Window - Fixed on right side */
        .zoom-result {
            position: relative;
            width: 100%;
            height: 500px;
            border-radius: 8px;
            overflow: hidden;
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            display: none;
        }
        
        .zoom-result.active {
            display: block;
        }
        
        .zoom-result-img {
            position: absolute;
            width: 200%; /* 2x zoom */
            height: 200%;
            object-fit: cover;
            pointer-events: none;
        }
        
        /* Product Details */
        .product-details {
            padding: 20px;
        }
        
        .product-title {
            font-size: 28px;
            color: #333;
            margin-bottom: 15px;
            line-height: 1.3;
        }
        
        .product-price {
            font-size: 24px;
            color: #b8860b;
            font-weight: 700;
            margin-bottom: 20px;
        }
        
        .product-description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 25px;
        }
        
        /* Thumbnail Gallery */
        .thumbnail-gallery {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding: 15px 5px;
            margin-top: 20px;
            scrollbar-width: thin;
        }
        
        .thumbnail-gallery::-webkit-scrollbar {
            height: 6px;
        }
        
        .thumbnail-gallery::-webkit-scrollbar-thumb {
            background: #b8860b;
            border-radius: 3px;
        }
        
        .thumbnail {
            flex: 0 0 auto;
            width: 80px;
            height: 80px;
            border-radius: 5px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .thumbnail:hover {
            border-color: #b8860b;
        }
        
        .thumbnail.active {
            border-color: #b8860b;
            box-shadow: 0 3px 10px rgba(184, 134, 11, 0.3);
        }
        
        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* Mobile Zoom Instructions */
        .mobile-zoom-hint {
            display: none;
            text-align: center;
            padding: 15px;
            background: #f0f0f0;
            border-radius: 5px;
            margin-top: 15px;
            color: #666;
            font-size: 14px;
        }
        
        .mobile-zoom-hint i {
            color: #b8860b;
            margin-right: 8px;
        }
        
        /* Responsive Design */
        @media (max-width: 992px) {
            .product-gallery {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .main-image-wrapper,
            .zoom-result {
                height: 400px;
            }
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 15px;
            }
            
            .main-image-wrapper,
            .zoom-result {
                height: 350px;
            }
            
            .zoom-lens {
                width: 120px;
                height: 120px;
            }
            
            .page-title {
                font-size: 24px;
            }
            
            .product-title {
                font-size: 24px;
            }
            
            .product-price {
                font-size: 20px;
            }
            
            .mobile-zoom-hint {
                display: block;
            }
        }
        
        @media (max-width: 576px) {
            .main-image-wrapper,
            .zoom-result {
                height: 300px;
            }
            
            .zoom-lens {
                width: 100px;
                height: 100px;
            }
            
            .thumbnail {
                width: 70px;
                height: 70px;
            }
            
            .product-title {
                font-size: 22px;
            }
        }
        
        /* Touch Device Detection */
        @media (hover: none) and (pointer: coarse) {
            .zoom-lens {
                display: none !important;
            }
            
            .main-image-wrapper {
                cursor: pointer;
            }
            
            .zoom-result {
                display: block !important;
                height: 300px;
                margin-top: 20px;
            }
        }
        
        /* ===== UTILITY CLASSES ===== */
        .hidden {
            display: none !important;
        }
        
        .text-center {
            text-align: center;
        }
        
        .mb-20 {
            margin-bottom: 20px;
        }
        
        /* ===== DEMO CONTROLS ===== */
        .demo-controls {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }
        
        .controls-title {
            font-size: 18px;
            color: #333;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .control-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .control-btn {
            padding: 10px 20px;
            background: #b8860b;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .control-btn:hover {
            background: #a3780a;
            transform: translateY(-2px);
        }
        
        .control-btn.secondary {
            background: #666;
        }
        
        .control-btn.secondary:hover {
            background: #555;
        }
        
        .info-text {
            color: #666;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .info-text i {
            color: #b8860b;
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="page-title">RoyaleStones.co.uk <span>Style Image Zoom</span></h1>
        
        <div class="product-gallery">
            <!-- Left: Main Image with Zoom Lens -->
            <div class="image-zoom-container">
                <div class="main-image-wrapper" id="mainImageContainer">
                    <img src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80" 
                         alt="Premium Marble Stone" 
                         id="mainProductImage">
                    <div class="zoom-lens" id="zoomLens"></div>
                </div>
                
                <!-- Mobile Hint -->
                <div class="mobile-zoom-hint">
                    <i class="fas fa-hand-pointer"></i>
                    Tap and drag on the image to zoom
                </div>
                
                <!-- Thumbnail Gallery -->
                <div class="thumbnail-gallery" id="thumbnailGallery">
                    <!-- Thumbnails will be added dynamically -->
                </div>
            </div>
            
            <!-- Right: Zoom Result Window -->
            <div class="zoom-result" id="zoomResult">
                <img src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1600&q=80" 
                     alt="Zoomed View" 
                     class="zoom-result-img" 
                     id="zoomResultImg">
            </div>
        </div>
        
        <!-- Product Details -->
        <div class="product-details">
            <h2 class="product-title">Premium Carrara Marble Slab</h2>
            <div class="product-price">¬£245.99 per sqm</div>
            <p class="product-description">
                This exquisite Carrara marble features a classic white background with delicate grey veining. 
                Each slab is carefully selected for consistent color and minimal fissuring. Perfect for kitchen 
                countertops, bathroom vanities, and feature walls.
            </p>
        </div>
        
        <!-- Demo Controls -->
        <div class="demo-controls">
            <h3 class="controls-title">Zoom System Controls</h3>
            <div class="control-group">
                <button class="control-btn" id="toggleZoom">Toggle Zoom System</button>
                <button class="control-btn secondary" id="changeImage">Change Product Image</button>
                <button class="control-btn secondary" id="resetZoom">Reset Zoom</button>
            </div>
            <p class="info-text">
                <i class="fas fa-info-circle"></i>
                <strong>Desktop:</strong> Move cursor over the image to activate zoom. 
                <strong>Mobile:</strong> Tap and drag on the image to zoom.
            </p>
        </div>
    </div>

    <script>
        // ===== IMAGE DATA =====
        const productImages = [
            {
                thumb: "https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80",
                main: "https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                zoom: "https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1600&q=80"
            },
            {
                thumb: "https://images.unsplash.com/photo-1611273426858-450d8e3c9fce?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80",
                main: "https://images.unsplash.com/photo-1611273426858-450d8e3c9fce?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                zoom: "https://images.unsplash.com/photo-1611273426858-450d8e3c9fce?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1600&q=80"
            },
            {
                thumb: "https://images.unsplash.com/photo-1595428774223-ef52624120d2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80",
                main: "https://images.unsplash.com/photo-1595428774223-ef52624120d2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                zoom: "https://images.unsplash.com/photo-1595428774223-ef52624120d2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1600&q=80"
            },
            {
                thumb: "https://images.unsplash.com/photo-1541140532154-b024d705b90a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80",
                main: "https://images.unsplash.com/photo-1541140532154-b024d705b90a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                zoom: "https://images.unsplash.com/photo-1541140532154-b024d705b90a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1600&q=80"
            }
        ];

        // ===== GLOBAL VARIABLES =====
        let currentImageIndex = 0;
        let isZoomActive = false;
        let zoomEnabled = true;
        let lensWidth = 150;
        let lensHeight = 150;
        const zoomFactor = 2; // 200% zoom (2x)

        // ===== DOM ELEMENTS =====
        const mainImageContainer = document.getElementById('mainImageContainer');
        const mainProductImage = document.getElementById('mainProductImage');
        const zoomLens = document.getElementById('zoomLens');
        const zoomResult = document.getElementById('zoomResult');
        const zoomResultImg = document.getElementById('zoomResultImg');
        const thumbnailGallery = document.getElementById('thumbnailGallery');
        
        // Control buttons
        const toggleZoomBtn = document.getElementById('toggleZoom');
        const changeImageBtn = document.getElementById('changeImage');
        const resetZoomBtn = document.getElementById('resetZoom');

        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ RoyaleStones Zoom System Initializing...');
            
            // Create thumbnail gallery
            createThumbnailGallery();
            
            // Initialize zoom system
            initializeZoomSystem();
            
            // Setup control buttons
            setupControls();
            
            // Adjust for touch devices
            detectTouchDevice();
            
            console.log('‚úÖ Zoom System Ready!');
        });

        // ===== THUMBNAIL GALLERY =====
        function createThumbnailGallery() {
            thumbnailGallery.innerHTML = '';
            
            productImages.forEach((image, index) => {
                const thumbnail = document.createElement('div');
                thumbnail.className = 'thumbnail';
                if (index === 0) thumbnail.classList.add('active');
                
                thumbnail.innerHTML = `<img src="${image.thumb}" alt="Thumbnail ${index + 1}">`;
                
                thumbnail.addEventListener('click', () => {
                    changeMainImage(index);
                });
                
                thumbnailGallery.appendChild(thumbnail);
            });
        }

        function changeMainImage(index) {
            if (index === currentImageIndex) return;
            
            currentImageIndex = index;
            
            // Update main image
            mainProductImage.src = productImages[index].main;
            zoomResultImg.src = productImages[index].zoom;
            
            // Update active thumbnail
            updateActiveThumbnail(index);
            
            // Reset zoom position
            resetZoomPosition();
            
            // Add fade effect
            mainProductImage.style.opacity = '0.7';
            setTimeout(() => {
                mainProductImage.style.opacity = '1';
            }, 300);
        }

        function updateActiveThumbnail(index) {
            const thumbnails = document.querySelectorAll('.thumbnail');
            thumbnails.forEach((thumb, i) => {
                if (i === index) {
                    thumb.classList.add('active');
                } else {
                    thumb.classList.remove('active');
                }
            });
        }

        // ===== ZOOM SYSTEM =====
        function initializeZoomSystem() {
            // Mouse enter - show lens and zoom window
            mainImageContainer.addEventListener('mouseenter', function() {
                if (!zoomEnabled) return;
                
                isZoomActive = true;
                zoomLens.style.display = 'block';
                zoomResult.classList.add('active');
                
                // Initialize lens size based on image
                updateLensSize();
            });
            
            // Mouse leave - hide lens and zoom window
            mainImageContainer.addEventListener('mouseleave', function() {
                isZoomActive = false;
                zoomLens.style.display = 'none';
                zoomResult.classList.remove('active');
            });
            
            // Mouse move - update lens and zoom position
            mainImageContainer.addEventListener('mousemove', function(e) {
                if (!isZoomActive || !zoomEnabled) return;
                
                // Get cursor position relative to image
                const pos = getCursorPosition(e);
                
                // Position the lens
                positionLens(pos.x, pos.y);
                
                // Update zoom window
                updateZoomWindow(pos.x, pos.y);
            });
            
            // Touch events for mobile
            let touchActive = false;
            
            mainImageContainer.addEventListener('touchstart', function(e) {
                if (!zoomEnabled) return;
                
                e.preventDefault();
                touchActive = true;
                isZoomActive = true;
                zoomResult.classList.add('active');
                
                updateLensSize();
                handleTouchMove(e);
            });
            
            mainImageContainer.addEventListener('touchmove', function(e) {
                if (!touchActive || !zoomEnabled) return;
                
                e.preventDefault();
                handleTouchMove(e);
            });
            
            mainImageContainer.addEventListener('touchend', function() {
                touchActive = false;
                isZoomActive = false;
                zoomResult.classList.remove('active');
            });
            
            // Handle window resize
            window.addEventListener('resize', function() {
                updateLensSize();
                resetZoomPosition();
            });
        }

        function getCursorPosition(e) {
            const rect = mainImageContainer.getBoundingClientRect();
            
            // Calculate cursor position relative to the image container
            let x = e.clientX - rect.left;
            let y = e.clientY - rect.top;
            
            // Adjust for scroll position
            x = x - window.pageXOffset;
            y = y - window.pageYOffset;
            
            // Ensure cursor stays within image bounds
            x = Math.max(0, Math.min(x, rect.width));
            y = Math.max(0, Math.min(y, rect.height));
            
            return { x, y };
        }

        function updateLensSize() {
            const imgRect = mainProductImage.getBoundingClientRect();
            const containerRect = mainImageContainer.getBoundingClientRect();
            
            // Calculate lens size as 25% of image width (adjustable)
            lensWidth = Math.min(150, imgRect.width * 0.25);
            lensHeight = Math.min(150, imgRect.height * 0.25);
            
            // Ensure minimum size
            lensWidth = Math.max(100, lensWidth);
            lensHeight = Math.max(100, lensHeight);
            
            zoomLens.style.width = `${lensWidth}px`;
            zoomLens.style.height = `${lensHeight}px`;
        }

        function positionLens(x, y) {
            // Calculate lens position (centered on cursor)
            const lensX = x - (lensWidth / 2);
            const lensY = y - (lensHeight / 2);
            
            // Get image boundaries
            const imgRect = mainProductImage.getBoundingClientRect();
            
            // Constrain lens within image bounds
            const maxX = imgRect.width - lensWidth;
            const maxY = imgRect.height - lensHeight;
            
            const finalX = Math.max(0, Math.min(lensX, maxX));
            const finalY = Math.max(0, Math.min(lensY, maxY));
            
            // Position the lens
            zoomLens.style.left = `${finalX}px`;
            zoomLens.style.top = `${finalY}px`;
        }

        function updateZoomWindow(x, y) {
            // Calculate percentage position (0-100%)
            const imgRect = mainProductImage.getBoundingClientRect();
            const xPercent = (x / imgRect.width) * 100;
            const yPercent = (y / imgRect.height) * 100;
            
            // Calculate zoomed image position
            // For 200% zoom, we need to position the zoomed image correctly
            const zoomPosX = xPercent * zoomFactor;
            const zoomPosY = yPercent * zoomFactor;
            
            // Position the zoomed image (center it)
            const zoomX = zoomPosX - (lensWidth / imgRect.width * 50);
            const zoomY = zoomPosY - (lensHeight / imgRect.height * 50);
            
            // Apply the position to zoom result image
            zoomResultImg.style.objectPosition = `${zoomX}% ${zoomY}%`;
            
            // Alternative method using transform (smoother)
            // zoomResultImg.style.transform = `translate(-${zoomX}%, -${zoomY}%) scale(${zoomFactor})`;
        }

        function handleTouchMove(e) {
            if (!e.touches || e.touches.length === 0) return;
            
            const touch = e.touches[0];
            const fakeMouseEvent = new MouseEvent('mousemove', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            
            // Get cursor position
            const pos = getCursorPosition(fakeMouseEvent);
            
            // Position the lens (for visual feedback)
            positionLens(pos.x, pos.y);
            
            // Update zoom window
            updateZoomWindow(pos.x, pos.y);
        }

        function resetZoomPosition() {
            // Reset zoom to center
            zoomResultImg.style.objectPosition = '50% 50%';
            
            // Center lens if visible
            if (isZoomActive) {
                const imgRect = mainProductImage.getBoundingClientRect();
                const centerX = imgRect.width / 2;
                const centerY = imgRect.height / 2;
                
                positionLens(centerX, centerY);
                updateZoomWindow(centerX, centerY);
            }
        }

        // ===== TOUCH DEVICE DETECTION =====
        function detectTouchDevice() {
            if ('ontouchstart' in window || navigator.maxTouchPoints) {
                // Touch device detected
                console.log('üì± Touch device detected - adjusting zoom behavior');
                
                // Hide lens on touch devices
                zoomLens.style.display = 'none';
                
                // Adjust zoom factor for touch
                // zoomFactor = 1.5;
            }
        }

        // ===== CONTROL FUNCTIONS =====
        function setupControls() {
            // Toggle zoom system
            toggleZoomBtn.addEventListener('click', function() {
                zoomEnabled = !zoomEnabled;
                
                if (zoomEnabled) {
                    this.textContent = 'Disable Zoom System';
                    this.style.background = '#28a745';
                    console.log('‚úÖ Zoom system enabled');
                } else {
                    this.textContent = 'Enable Zoom System';
                    this.style.background = '#b8860b';
                    zoomLens.style.display = 'none';
                    zoomResult.classList.remove('active');
                    console.log('‚è∏Ô∏è Zoom system disabled');
                }
            });
            
            // Change image
            changeImageBtn.addEventListener('click', function() {
                let newIndex = currentImageIndex + 1;
                if (newIndex >= productImages.length) {
                    newIndex = 0;
                }
                changeMainImage(newIndex);
            });
            
            // Reset zoom
            resetZoomBtn.addEventListener('click', resetZoomPosition);
        }

        // ===== DEBUG & UTILITY FUNCTIONS =====
        function logZoomInfo() {
            const imgRect = mainProductImage.getBoundingClientRect();
            console.log('üìê Image Dimensions:', {
                width: imgRect.width,
                height: imgRect.height,
                lensWidth: lensWidth,
                lensHeight: lensHeight,
                zoomFactor: zoomFactor
            });
        }

        // Initial log
        setTimeout(logZoomInfo, 1000);
    </script>
</body>
</html>
